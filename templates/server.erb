mode server
proto <%= scope.lookupvar('proto') %>
port <%= scope.lookupvar('port') %>
dev <%= scope.lookupvar('dev') %>

group <%= scope.lookupvar('group_to_set') %>
user <%= scope.lookupvar('user') %>

client-config-dir /etc/openvpn/<%= scope.lookupvar('name') %>/client-configs
ca /etc/openvpn/<%= scope.lookupvar('name') %>/keys/ca.crt
cert /etc/openvpn/<%= scope.lookupvar('name') %>/keys/server.crt
key /etc/openvpn/<%= scope.lookupvar('name') %>/keys/server.key
dh /etc/openvpn/<%= scope.lookupvar('name') %>/keys/dh1024.pem

cipher <%= cipher %>
keepalive <%= keepalive %>
<% if scope.lookupvar('tls_server') -%>
tls-server
<% end -%>
<% if scope.lookupvar('compression') != '' -%>
<%= scope.lookupvar('compression') %>
<% end -%>
mute <%= mute %>
verb <%= verb %>
<% if scope.lookupvar('logfile') -%>
log-append <%= scope.lookupvar('logfile') %>
<% end -%>
status <%= scope.lookupvar('status_log') %>
log-append <%= scope.lookupvar('log_append') %>
<% if scope.lookupvar('local') != '' -%>
local <%= scope.lookupvar('local') %>
<% end -%>
<% if scope.lookupvar('ipp') -%>
ifconfig-pool-persist <%= scope.lookupvar('name') %>/vpn-ipp.txt
<% end -%>

<% if scope.lookupvar('server') != '' -%>
server <%= scope.lookupvar('server') %>
<% end -%>
<% scope.lookupvar('push').each do |item| -%>
push <%= item %>
<% end -%>
